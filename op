local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "Poderes Menu (VERSÃƒO FINAL)",
   LoadingTitle = "Iniciando Sistema...",
   LoadingSubtitle = "by Gemini",
   ConfigurationSaving = { Enabled = false }
})

local SelectedPlayer = nil
local Loops = {} 
local Toggles = {} 
local clickAttackEnabled = false

-- Lista atualizada: Hot Coffee, Healing Energy e Sand Road removidos
local ListaPoderes = {
    "1% Punch", "Swine Explosion", 
    "X Slice", "Rage Mode", "Unrefusable Order", 
    "Guided Orbs", "Dismantle", "Charged Aura", "Pineapple Throw", 
    "Sailor's Aura", "Tidal Wave", "Ultimate Lifeform", 
    "Disk Slice", "Smoke Cover", "Discharge",
    "Bring Spell", "Hollow Purple"
}

-- Criar Abas
local Tab = Window:CreateTab("Principal", 4483362458)
local ClickTab = Window:CreateTab("Click Mode", 4483362458)

-- ABA CLICK MODE (Hollow Purple no Mouse)
ClickTab:CreateSection("Ataque Manual")
ClickTab:CreateToggle({
   Name = "Hollow Purple no Clique",
   CurrentValue = false,
   Callback = function(Value)
       clickAttackEnabled = Value
   end,
})

-- Evento de Clique
local lp = game.Players.LocalPlayer
local Mouse = lp:GetMouse()

Mouse.Button1Down:Connect(function()
    if not clickAttackEnabled then return end
    local remote = game:GetService("ReplicatedStorage"):FindFirstChild("AbilityHit", true)
    if remote then
        local target = Mouse.Target
        local hum = target and target.Parent and target.Parent:FindFirstChildOfClass("Humanoid")
        remote:FireServer("Hollow Purple", hum, Mouse.Hit)
    end
end)

-- ABA PRINCIPAL
local PlayerDropdown = Tab:CreateDropdown({
   Name = "Selecionar Alvo",
   Options = {}, 
   CurrentOption = "",
   MultipleOptions = false,
   Callback = function(Option)
       SelectedPlayer = Option[1]
   end,
})

local function UpdateDropdown()
    local players = {}
    for _, v in pairs(game:GetService("Players"):GetPlayers()) do
        if v.Name ~= lp.Name then table.insert(players, v.Name) end
    end
    PlayerDropdown:Refresh(players, true)
end

Tab:CreateButton({Name = "Atualizar Jogadores", Callback = function() UpdateDropdown() end})

local function StartPowerLoop(powerName)
    task.spawn(function()
        while Loops[powerName] do
            if SelectedPlayer then
                local p = game:GetService("Players"):FindFirstChild(SelectedPlayer)
                if p and p.Character and p.Character:FindFirstChild("Humanoid") then
                    pcall(function()
                        local pos = (powerName == "Bring Spell") and lp.Character.HumanoidRootPart.CFrame or p.Character.HumanoidRootPart.CFrame
                        game:GetService("ReplicatedStorage").Remotes.AbilityHit:FireServer(powerName, p.Character.Humanoid, pos)
                    end)
                end
            end
            task.wait(0.1) 
        end
    end)
end

Tab:CreateSection("CONTROLES MESTRE")

Tab:CreateButton({
   Name = "ðŸ”¥ ATIVAR TUDO (MODO CAOS)",
   Callback = function()
       if not SelectedPlayer then return end
       for _, nome in pairs(ListaPoderes) do
           Loops[nome] = true
           if Toggles[nome] then Toggles[nome]:Set(true) end
           StartPowerLoop(nome)
       end
   end,
})

Tab:CreateButton({
   Name = "ðŸ›‘ PARAR TUDO",
   Callback = function()
       for _, nome in pairs(ListaPoderes) do
           Loops[nome] = false
           if Toggles[nome] then Toggles[nome]:Set(false) end
       end
   end,
})

Tab:CreateSection("PODERES INDIVIDUAIS")

-- Delay para nÃ£o travar o carregamento
task.wait(0.5)

for _, nomePoder in pairs(ListaPoderes) do
    Loops[nomePoder] = false
    Toggles[nomePoder] = Tab:CreateToggle({
       Name = "Loop: " .. nomePoder,
       CurrentValue = false,
       Callback = function(Value)
           Loops[nomePoder] = Value
           if Value then StartPowerLoop(nomePoder) end
       end,
    })
end

UpdateDropdown()
